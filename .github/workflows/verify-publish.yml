name: Verify Publish

on:
  workflow_dispatch:
    inputs:
      token:
        description: 'Personal access token (optional). If omitted, uses ${{ secrets.GITHUB_TOKEN }}'
        required: false

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run verify script
        env:
          OAUTH_TEST_TOKEN: ${{ github.event.inputs.token || secrets.GITHUB_TOKEN }}
        run: pnpm install --silent && pnpm verify:publish
